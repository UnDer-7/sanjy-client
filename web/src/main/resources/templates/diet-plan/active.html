<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Active Plan - SanJy</title>
    <link rel="stylesheet" th:href="@{/css/main.css}">
    <link rel="stylesheet" th:href="@{/css/diet-plan.css}">
</head>
<body>
    <div class="container">
        <header>
            <h1>Active Diet Plan</h1>
            <nav>
                <a th:href="@{/}">Home</a>
                <a th:href="@{/diet-plan/new}">New Plan</a>
                <a th:href="@{/meal/today}">Today's Meals</a>
                <a th:href="@{/meal/new}">Record Meal</a>
            </nav>
        </header>

        <main>
            <div th:if="${dietPlan == null}" class="empty-state">
                <h2>No active plan found</h2>
                <p>You don't have an active diet plan yet.</p>
                <a th:href="@{/diet-plan/new}" class="btn btn-primary">Create First Plan</a>
            </div>

            <div th:if="${dietPlan != null}" class="diet-plan-view">
                <div class="plan-header">
                    <h2 th:text="${dietPlan.name}">Plan Name</h2>
                    <span class="status-badge active">Active</span>
                </div>

                <section class="info-section">
                    <h3>Period</h3>
                    <p>
                        <strong>Start:</strong>
                        <span th:text="${#temporals.format(dietPlan.startDate, 'dd/MM/yyyy')}">15/01/2025</span>
                    </p>
                    <p>
                        <strong>End:</strong>
                        <span th:text="${#temporals.format(dietPlan.endDate, 'dd/MM/yyyy')}">15/04/2025</span>
                    </p>
                </section>

                <section class="info-section macros-section">
                    <h3>Daily Macros</h3>
                    <div class="macros-grid">
                        <div class="macro-card">
                            <span class="macro-label">Calories</span>
                            <span class="macro-value" th:text="${dietPlan.dailyCalories} + ' kcal'">2266 kcal</span>
                        </div>
                        <div class="macro-card">
                            <span class="macro-label">Protein</span>
                            <span class="macro-value" th:text="${dietPlan.dailyProteinInG} + ' g'">186 g</span>
                        </div>
                        <div class="macro-card">
                            <span class="macro-label">Carbs</span>
                            <span class="macro-value" th:text="${dietPlan.dailyCarbsInG} + ' g'">288 g</span>
                        </div>
                        <div class="macro-card">
                            <span class="macro-label">Fat</span>
                            <span class="macro-value" th:text="${dietPlan.dailyFatInG} + ' g'">30 g</span>
                        </div>
                    </div>
                </section>

                <section class="info-section" th:if="${dietPlan.goal != null}">
                    <h3>Goal</h3>
                    <p th:text="${dietPlan.goal}">Fat loss with muscle preservation</p>
                </section>

                <section class="info-section" th:if="${dietPlan.nutritionistNotes != null}">
                    <h3>Nutritionist Notes</h3>
                    <p th:text="${dietPlan.nutritionistNotes}">Notes...</p>
                </section>

                <section class="meals-section">
                    <h3>Planned Meals</h3>

                    <div th:each="mealType : ${dietPlan.mealTypes}" class="meal-type-card">
                        <div class="meal-type-header">
                            <h4 th:text="${mealType.name}">Breakfast</h4>
                            <span class="scheduled-time"
                                  th:text="${#temporals.format(mealType.scheduledTime, 'HH:mm')}">06:20</span>
                        </div>

                        <div class="meal-options">
                            <h5>Options:</h5>
                            <ul>
                                <li th:each="option : ${mealType.standardOptions}">
                                    <strong th:text="'Option ' + ${option.optionNumber}">Option 1</strong>:
                                    <span th:text="${option.description}">Option description</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <footer>
            <p>&copy; 2025 SanJy - Food Control System</p>
        </footer>
    </div>
</body>
</html>
